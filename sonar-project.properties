# =============================================================================
# SonarQube Configuration - Tokenizer42
# =============================================================================
# Configuration for SonarQube/SonarCloud static analysis
# =============================================================================

# Project identification
sonar.projectKey=tokenizer42
sonar.projectName=Tokenizer42
sonar.projectVersion=1.0.0

# Source directories
sonar.sources=code/contracts,code/scripts,frontend
sonar.tests=code/test

# Language settings
sonar.language=ts
sonar.sourceEncoding=UTF-8

# =============================================================================
# Exclusions - Files/directories to exclude from analysis
# =============================================================================

# General exclusions (not scanned at all)
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/artifacts/**,\
  **/cache/**,\
  **/typechain/**,\
  **/typechain-types/**,\
  **/*.min.js,\
  **/*.d.ts

# Test exclusions (excluded from duplication/coverage analysis)
sonar.test.exclusions=\
  **/test/**,\
  **/*.test.ts,\
  **/*.test.js,\
  **/*.spec.ts,\
  **/*.spec.js

# =============================================================================
# Security Analysis Exclusions
# Exclude test files from security vulnerability scanning
# Test files contain mock data and assertions that trigger false positives
# =============================================================================
sonar.security.exclusions=\
  **/test/**,\
  **/*.test.ts,\
  **/*.test.js,\
  **/*.spec.ts,\
  **/*.spec.js,\
  **/fixtures/**

# =============================================================================
# Issue Exclusions - Specific rules to ignore in specific files
# =============================================================================

# Ignore crypto-related rules in test files (OpenZeppelin error names are not crypto)
# Rule: typescript:S4426 - Cryptographic algorithms should be robust
# Rule: typescript:S5542 - Encryption algorithms should be used with secure mode
sonar.issue.ignore.multicriteria=e1,e2

# Exclude test files from crypto analysis
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S4426
sonar.issue.ignore.multicriteria.e1.resourceKey=**/test/**

sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S5542
sonar.issue.ignore.multicriteria.e2.resourceKey=**/test/**

# =============================================================================
# Coverage settings
# =============================================================================
sonar.typescript.lcov.reportPaths=code/coverage/lcov.info
sonar.coverage.exclusions=\
  **/test/**,\
  **/*.test.ts,\
  **/*.d.ts

# =============================================================================
# TypeScript settings
# =============================================================================
sonar.typescript.tsconfigPath=code/tsconfig.json
